{% extends "base.html" %}

{% block title %}Основное окно с персонажами{% endblock %}

{% block content %}
<style>
    body {
        background-color: #121212; /* Темный фон для всего тела */
        font-family: Arial, sans-serif;
        margin: 0; /* Убираем отступы по умолчанию */
        padding: 0; /* Убираем отступы по умолчанию */
    }

    .character-window {
        width: 90%; /* Ширина окна */
        max-width: 1200px; /* Увеличенная максимальная ширина для больших экранов */
        margin: auto;
        background-color: #1e1e1e;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); /* Тень для окна */
    }

    h2 {
        text-align: center;
        color: #ffffff;
        font-size: 2em; /* Увеличенный размер шрифта */
        margin-bottom: 20px; /* Отступ снизу */
    }

    .character-list {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
    }

    .character {
        background-color: #333333;
        margin: 10px;
        padding: 15px; /* Увеличенный отступ */
        border-radius: 8px;
        width: calc(25% - 20px); /* Ширина карточки для больших экранов */
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Тень для карточек */
        border: 2px solid #6200ea; /* Рамка вокруг карточки */
        transition: transform 0.2s; /* Плавный переход при наведении */
        position: relative; /* Для позиционирования номера */
    }

    .character:hover {
        transform: scale(1.05); /* Увеличение карточки при наведении */
    }

    .character h3 {
        color: #ffffff;
        text-align: center;
        font-size: 1.5em; /* Увеличенный размер шрифта */
        margin-bottom: 10px; /* Отступ снизу */
    }

    .character-number {
        position: absolute; /* Абсолютное позиционирование номера */
        top: 10px;
        left: 10px;
        background-color: rgba(98, 0, 234, 0.8); /* Полупрозрачный фон для номера */
        color: white;
        padding: 5px 10px;
        border-radius: 5px;
        font-weight: bold;
    }

    .character p {
        color: #cccccc;
        text-align: center;
        margin: 5px 0; /* Отступы между абзацами */
        padding: 5px; /* Добавлено для выделения */
        border-radius: 5px; /* Скругление углов */
        background-color: rgba(98, 0, 234, 0.1); /* Полупрозрачный фон для выделения */
        position: relative; /* Для позиционирования ховера */
        cursor: pointer; /* Указатель курсора для интерактивности */
    }

    .character p:hover {
        background-color: rgba(98, 0, 234, 0.3); /* Изменение фона при наведении */
    }

    .general-info, .status-window {
        background-color: #444444;
        margin: 20px 0; /* Отступ сверху и снизу */
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #6200ea; /* Рамка для общего описания и статуса */
    }

    .status-window {
        color: #ffffff;
    }

    .button {
        display: block;
        margin: 20px auto; /* Увеличенный отступ сверху */
        background-color: #6200ea;
        color: white;
        padding: 12px 20px; /* Увеличенный отступ */
        border: none;
        border-radius: 5px;
        cursor: pointer;
        text-align: center;
        transition: background-color 0.3s, transform 0.3s; /* Добавлено изменение трансформации */
    }

    .button:hover {
        background-color: #3700b3;
        transform: scale(1.05); /* Увеличение кнопки при наведении */
    }

    /* Медиа-запросы для мобильных устройств */
    @media (max-width: 900px) {
        .character {
            width: calc(45% - 20px); /* Ширина карточки на средних экранах */
        }

        h2 {
            font-size: 1.8em; /* Уменьшенный размер шрифта для заголовка */
        }
    }

    @media (max-width: 600px) {
        .character {
            width: calc(100% - 20px); /* Ширина карточки на мобильных устройствах */
        }

        h2 {
            font-size: 1.5em; /* Уменьшенный размер шрифта для заголовка */
        }

        .button {
            padding: 10px 15px; /* Уменьшенный отступ для кнопки */
        }
    }
</style>

<div class="character-window">
    <h2>Бункер</h2>
    
    <div class="general-info">
        <h3>Описание бункера</h3>
        <p>{{ bunker_description }}</p>
    </div>

    <div class="general-info">
        <h3>Описание карты</h3>
        <p>{{ map_description }}</p>
    </div>

    <div class="status-window">
        <h3>Текущий статус игры</h3>
        <p id="game-status">Игра в процессе... Подождите.</p>
        <button class="button" onclick="updateGameStatus()">Обновить статус</button>
    </div>

    <div class="character-list">
        {% for character in game_users %}
            <div class="character">
                <div class="character-number">{{ character.game_number }}</div> <!-- Номер карточки -->
                <h3>{{ character.game_name }}<div>({{character.username}})</div></h3>
                <p onclick="showStat('{{ character.profession }}')"><strong>Профессия:</strong> {{ character.profession }}</p>
                <p onclick="showStat('{{ character.health }}')"><strong>Здоровье:</strong> {{ character.health }}</p>
                <p onclick="showStat('{{ character.bio_character }}')"><strong>БИО:</strong> {{ character.bio_character }}</p>
                <p onclick="showStat('{{ character.additional_skills }}')"><strong>Дополнительные навыки:</strong> {{ character.additional_skills }}</p>
                <p onclick="showStat('{{ character.hobby }}')"><strong>Хобби:</strong> {{ character.hobby }}</p>
                <p onclick="showStat('{{ character.spec_condition }}')"><strong>Особые условия:</strong> {{ character.spec_condition }}</p>
                <p onclick="showStat('{{ character.items }}')"><strong>Вещи:</strong> {{ character.items }}</p>
            </div>
        {% empty %}
            <p style="color: #ffffff; text-align: center;">Нет доступных персонажей.</p>
        {% endfor %}
    </div>
</div>

<script>
function showStat(stat) {
    // Заглушка для функции показа статистики
    console.log("Статистика:", stat);
}

function updateGameStatus() {
    // Заглушка для обновления статуса игры
    document.getElementById("game-status").innerText = "Статус обновлен! Игра продолжается...";
}
</script>

{% endblock %}
